(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{190:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("在刚刚我们已经启动了一个基本的YuQ实例，并且触发了他的群聊和私聊路由，如果你有仔细观察IDE下方的Log，你还可以发现定时器（Job）和事件（Event）也正在运行。")]),t._v(" "),n("p",[t._v("现在，让我们来看看到底发生了什么。")]),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("我记得我说过，YuQ是一个无头的QQ客户端，当你向你的机器人发送Hello的时候，这条消息也会从腾讯服务器下发至你的机器人QQ，这时候，机器人就会和正常的QQ一样接受，并且解析他们。")]),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("这时候，消息已经被YuQ所拿到，他将信息与发送者包装成为一个个对象，然后打包开始走固定的流程，首先出场的是Event（事件）。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),n("p",[t._v("更详细的情况我们会在事件功能进一步阐述，目前你只需要知道他是触发型，有优先级，可以取消向后的传递，就足以了。")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),n("p",[t._v("Before是信息在Controller中第一个到达的地方，通常来说，Action中的参数表达了具体的命令，他所在类的Before则会先于Action一步对其进行处理，构思来自于Web的拦截器。常见情况下我们会在这里进行开关判断，更为进阶的使用一步我们后续再说，先来看看代码。")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),n("p",[t._v("Action是信息匹配的地方，经过了重重过滤，我们的信息在符合条件的情况下终于到达了他所要到达的地方，在这里，就和写Web一样，我们要针对指令的请求进行反馈，这一点无需多言，但是在这里，YuQ仍然有者很多特点需要说一说。")]),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),n("p",[t._v("这是一个特殊的注解，注解参数是异常类型，可以用于捕获所在类里面的该种异常然后进行处理，我会稍后在"),n("router-link",{attrs:{to:"./command.html"}},[t._v("编写命令")]),t._v("中对他进行描述。如果你动手能力强，在完成基础部分以后，也可以考虑进行尝试。")],1)])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"发生了什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发生了什么？"}},[this._v("#")]),this._v(" 发生了什么？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"从-hello-开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-hello-开始"}},[this._v("#")]),this._v(" 从 Hello 开始")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"进入yuq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入yuq"}},[this._v("#")]),this._v(" 进入YuQ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"进入event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入event"}},[this._v("#")]),this._v(" 进入Event")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("不论什么消息，常规的群聊消息或者是好友请求这样的特殊消息，基本都存在着对应的事件，所以YuQ拿到消息的第一时间，也是将消息发送给事件，在Event中，你可以找到MessageEvent。"),n("br"),t._v("\n顾名思义，消息事件会在这里触发，并允许处理逻辑，对于MessageEvent，有两个子类，分别是PrivateMessageEvent和GroupMessageEvent，对应的处理群聊和私聊逻辑。"),n("br"),t._v("\nEvent可以使用参数设置优先级，任何事件都拥有"),n("code",[t._v("high")]),t._v(","),n("code",[t._v("normal")]),t._v(","),n("code",[t._v("low")]),t._v(",三个级别可供选择，默认情况为"),n("code",[t._v("normal")]),t._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("weight "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Weight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("normal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onGroupMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GroupMessageEvent")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"消息来自群：%s(%d)%n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGroup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGroup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"消息来自群成员：%s(%d)%n"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNameCard")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这是处理群聊的事件代码，其中"),n("code",[t._v("@Event")]),t._v("表明它是一个事件，"),n("code",[t._v("(weight = Event.Weight.normal)")]),t._v("声明了其权重，"),n("code",[t._v("event.getGroup()")]),t._v("是通过事件获取其群对象，其中包括了群名称"),n("code",[t._v("event.getGroup().getName()")]),t._v(",群ID"),n("code",[t._v("event.getGroup().getId()")]),t._v("。"),n("br"),t._v("\n同时也获取了发送者对象"),n("code",[t._v("event.getSender()")]),t._v("，它的昵称"),n("code",[t._v("event.getSender().getNameCard()")]),t._v("和他的号码"),n("code",[t._v("event.getSender().getId()")]),t._v("。"),n("br"),t._v("\n你还可以使用"),n("code",[t._v("event.getMessage")]),t._v("来获取发送的信息。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[this._v("#")]),this._v(" Controller")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("走过Event，信息将会被给到对应的Controller（但是仅有聊天信息，好友请求等情况是作为事件处理的），作为命令式机器人，使用大量的if，else或者switch判断机器人的信息是否符合指令实在是，太累了。作为一个现代开发者，更喜欢的是注解表达指令，直接处理逻辑。"),s("br"),this._v("\n使用过Spring或者其他现代MVC框架的人都应该很容易的理解这里的过程，匹配指令，处理逻辑，进行返回，但是有几个点我需要说明一下，这是机器人与WebMVC不同的地方。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"关于"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于"}},[this._v("#")]),this._v(" 关于")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("写在介绍功能之前，是因为我要简单的说明一点，Controller的核心是"),n("code",[t._v("@Action")]),t._v("，所以只有遇到了适合"),n("code",[t._v("@Action")]),t._v("的情况下，才会走所在类的"),n("code",[t._v("@Before")]),t._v("和"),n("code",[t._v("@After")]),t._v("，如果没匹配到任何的"),n("code",[t._v("@Action")]),t._v("，那么信息在走完Event之后就已经结束了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"before"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#before"}},[this._v("#")]),this._v(" Before")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Before")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" qq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("qq "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" mif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你没有使用该命令的权限！"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toThrowable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("long qq")]),t._v("表明你在向YuQ索要信息发送者的QQ号码，同理你可以使用"),n("code",[t._v("long group")]),t._v("来获取群号码，这是特性之一的参数自动注入的简单使用。"),n("br"),t._v("\n当我们认为不符合条件不可以执行下一步时，与"),n("code",[t._v("event.setCancel(true);")]),t._v("来取消事件不同，这里使用throw抛出异常来通知YuQ，当你throw了一个Message类型的异常，YuQ会自动将你的信息返回到原来的群聊（私聊）窗口中。\n而"),n("code",[t._v("mif")]),t._v("是MessageItemFactory的缩写，他在上面已经被注入进来（在"),n("code",[t._v("TestGroupController")]),t._v("的第35行），在这里是为了快速的制作一个Message，你以后会经常碰到他，使用它。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#action"}},[this._v("#")]),this._v(" Action")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"禁言 {sb} {time}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Synonym")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ban {sb} {time}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ban")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Member")]),t._v(" sb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Member")]),t._v(" qq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" time "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("qq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAdmin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            sb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ban")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"好的"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        qq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ban")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"您没有使用该命令的权限！为了防止恶意操作，你已被禁言相同时间。"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("别名")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("上面这一段中，"),n("code",[t._v("@Synonym")]),t._v("与"),n("code",[t._v("@Action")]),t._v("表达了两个不同的命令，但是他们的参数是相同的，这意味着"),n("code",[t._v("禁言 xxx xx")]),t._v("与"),n("code",[t._v("ban xxx xx")]),t._v("都会在这里触发。这就是与WebMVC框架不同的一点，别名。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("参数注入")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("在整个方法的参数中分别出现了"),n("code",[t._v("Member sb")]),t._v("，"),n("code",[t._v("Member qq")]),t._v("，"),n("code",[t._v("int time")]),t._v("三项，其中"),n("code",[t._v("Member qq")]),t._v("道理与上面Before中出现"),n("code",[t._v("long qq")]),t._v("相同，他们都是在索要发送者的信息，不同点在于，Before中仅索要了号码，而这里则在索要相对完整的个人信息。\n在代码中，"),n("code",[t._v("qq.isAdmin()")]),t._v("判断了发言者否为管理员。"),n("br"),t._v("\n而"),n("code",[t._v("Member sb")]),t._v("是YuQ完成的智能转换，根据你在消息中提供的账号，找到他的对应信息，转成一个对象，来提供禁言的功能，任何时候，你都可以这样来获取某个人的信息，而无需自己寻找。"),n("br"),t._v("\n接着是"),n("code",[t._v("int time")]),t._v("这是由于你已知了参数time是一个数字，表达禁言的时间，那么他最终都会变成"),n("code",[t._v("int")]),t._v("类型，所以你可以直接向YuQ要求提供"),n("code",[t._v("int")]),t._v("类型的参数，这样你可以直接使用而无需自己转换。当然，如果不能转换会产生异常。"),n("br"),t._v("\n在某些情况下，你甚至可以直接向YuQ索要"),n("code",[t._v("boolean")]),t._v("类型的参数。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("返回类型")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("最后是方法的返回，YuQ接受两种返回方式，"),n("code",[t._v("String")]),t._v("和"),n("code",[t._v("Message")]),t._v("，当你选择前者时，直接return即可。他会自动被包装成为"),n("code",[t._v("Message")]),t._v("并发送回到信息来源的地方。如果是"),n("code",[t._v("Message")]),t._v("则需要你使用之前我们说过的"),n("code",[t._v("MessageItemFactory")]),t._v("来包装成为"),n("code",[t._v("Message")]),t._v("返回,在这样的返回模式下，返回值极为多样化，可以包括文字，图片，@信息等。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"after"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#after"}},[this._v("#")]),this._v(" After")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这里已经算得上是消息的终点站，走出这里之后，消息就会被YuQ发往腾讯服务器，然后你就会在群聊或者私聊窗口看到他。但是对于After，其实并没有太多需要说的，他和"),n("code",[t._v("@Before")]),t._v("太多相似，只是一个在"),n("code",[t._v("@Action")]),t._v("之前，一个在"),n("code",[t._v("@Action")]),t._v("之后。"),n("br"),t._v("\n所以接下来")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"catch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#catch"}},[this._v("#")]),this._v(" Catch")])}],!1,null,null,null);s.default=e.exports}}]);