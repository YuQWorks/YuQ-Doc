(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{414:function(t,e,n){"use strict";n.r(e);var v=n(45),a=Object(v.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"event"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#event"}},[t._v("#")]),t._v(" Event")]),t._v(" "),n("h2",{attrs:{id:"内置事件列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内置事件列表"}},[t._v("#")]),t._v(" 内置事件列表")]),t._v(" "),n("p",[t._v("子事件会继承父事件属性，如无特殊情况，则不标注父事件含有的属性。")]),t._v(" "),n("h3",{attrs:{id:"内置事件列表-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内置事件列表-2"}},[t._v("#")]),t._v(" 内置事件列表")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("事件名")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("父事件")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("可否取消")]),t._v(" "),n("th",[t._v("事件属性")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("sender: 发送人")]),t._v(" "),n("td",[t._v("收到消息事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMessageEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("sender: 发送消息的群成员, group: 消息来自群")]),t._v(" "),n("td",[t._v("群消息事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("PrivateMessageEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("私聊消息事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageRecallEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("sender: 发送者, operator: 撤回者, messageId: 消息Id")]),t._v(" "),n("td",[t._v("消息撤回事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("PrivateRecallEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageRecallEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("私聊消息撤回事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupRecallEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("MessageRecaallEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("group: 撤回消息的群")]),t._v(" "),n("td",[t._v("私聊消息撤回事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("FriendListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("好友列表变动事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("FriendAddEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("FriendListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("friend: 新增的好友")]),t._v(" "),n("td",[t._v("好友新增事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("FriendDeleteEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("FriendListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("friend: 消失的好友")]),t._v(" "),n("td",[t._v("好友减少事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("群列表变动事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("BotJoinGroupEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("group: 进入的群")]),t._v(" "),n("td",[t._v("机器人加入新群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("BotLevelGroupEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupListEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("group: 离开的群")]),t._v(" "),n("td",[t._v("机器人从离开某群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("group: 成员变动的群, member: 变动的群成员")]),t._v(" "),n("td",[t._v("群成员事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberJoinEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("新成员入群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberInviteEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberJoinEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("inviter: 邀请者")]),t._v(" "),n("td",[t._v("新成员被邀请入群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberLeaveEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("群成员退群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberKickEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberLeaveEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("operator: 操作者")]),t._v(" "),n("td",[t._v("群成员被移除群事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupBanMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("operator: 操作者, time: 禁言时长")]),t._v(" "),n("td",[t._v("群成员被禁言事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupUnBanMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("operator: 操作者")]),t._v(" "),n("td",[t._v("群成员被取消禁言事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupBanBotEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("operator: 操作者, time: 禁言时长")]),t._v(" "),n("td",[t._v("机器人在某群被禁言事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupUnBanBotEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("operator: 操作者")]),t._v(" "),n("td",[t._v("机器人在某群被取消禁言事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("NewRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("message: 请求消息")]),t._v(" "),n("td",[t._v("新的请求事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("NewFriendRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("NewRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("qq: 申请人的 QQ 号码")]),t._v(" "),n("td",[t._v("新的好友请求事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupInviteEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("NewRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("group: 群号码, qq: 邀请人的 QQ 号码")]),t._v(" "),n("td",[t._v("新的邀请入群事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("GroupMemberRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("NewRequestEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("group: 被申请的群, qq: 申请人的 QQ 号码")]),t._v(" "),n("td",[t._v("申请入群事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("ContextSessionCreateEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),n("td",[t._v("session: Session")]),t._v(" "),n("td",[t._v("ContextSession 创建事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("ActionContextInvokeEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("Event")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("context: 上下文")]),t._v(" "),n("td",[t._v("Controller 处理链路事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("ActionContextInvokeEvent.Per")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("ActionContextInvokeEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("Controller 处理之前事件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("ActionContextInvokeEvent.Post")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("ActionContextInvokeEvent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),n("td",[t._v("-")]),t._v(" "),n("td",[t._v("Controller 处理之后事件")])])])]),t._v(" "),n("h3",{attrs:{id:"内置事件注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内置事件注意事项"}},[t._v("#")]),t._v(" 内置事件注意事项")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("事件名")]),t._v(" "),n("th",[t._v("注意事项")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("MessageEvent")]),t._v(" "),n("td",[t._v("MessageEvent 及其子事件，取消事件会导致 Controller 部分一并取消响应。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("GroupBanBotEvent")]),t._v(" "),n("td",[t._v("与 GroupBanMemberEvent 事件相互独立，触发本事件不会触发 GroupBanMemberEvent 事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("GroupUnBanBotEvent")]),t._v(" "),n("td",[t._v("与 GroupUnBanMemberEvent 事件相互独立，触发本事件不会触发 GroupUnBanMemberEvent 事件。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("NewRequestEvent")]),t._v(" "),n("td",[t._v("当事件被取消时，则代表处理本请求。事件的 accept 属性若为 true 则为接受，false 则为拒绝，null 则为忽略。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("GroupMemberRequestEvent")]),t._v(" "),n("td",[t._v("当拒绝入群时，若事件的 blackList 为 true，则禁止此人继续加群。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("ActionContextInvokeEvent.Per")]),t._v(" "),n("td",[t._v("事件发生于路由寻路之前，也就是说，没有任何路由绑定依旧会触发此事件。取消会中断处理链路。")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("ActionContextInvokeEvent.Post")]),t._v(" "),n("td",[t._v("事件发生于路由寻路之后，也就是说，没有任何路由绑定依旧会触发此事件。取消会中断可能存在的返回消息的发送。")])])])]),t._v(" "),n("h2",{attrs:{id:"事件监听器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件监听器"}},[t._v("#")]),t._v(" 事件监听器")]),t._v(" "),n("h3",{attrs:{id:"了解事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#了解事件"}},[t._v("#")]),t._v(" 了解事件")]),t._v(" "),n("p",[t._v("首先，让我们来了解一下 YuQ 的事件机制。")]),t._v(" "),n("p",[t._v("监听器是监听一个事件，当触发了某个事件时，调用相关的监听器。"),n("br"),t._v("\n根据监听器及事件的逻辑，来确定后续的过程。")]),t._v(" "),n("p",[t._v("同一个事件监听分为 3 个不同的等级，高，中，低。"),n("br"),t._v("\n同一个事件，可以被监听多次。"),n("br"),t._v("\n有些事件可以取消，有些则不能。")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" cancel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事件可否被取消。")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelAble")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n        省略 Getter，Setter\n    */")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("所有事件都 继承自 Event 类。\n监听某个事件，其任意一个子事件触发都会触发父事件监听器。"),n("br"),t._v("\n这句话可能听起来有些让人难以理解。"),n("br"),t._v("\n举个例子，MessageEvent 有两个子类 GroupMessageEvent 与 PrivateMessageEvent。"),n("br"),t._v("\n那么 GroupMessageEvent 与 PrivateMessageEvent 就是 MessageEvent 的子事件。"),n("br"),t._v("\n反之 MessageEvent 就是他俩的父事件。"),n("br"),t._v("\n那么这句话怎么理解呢？"),n("br"),t._v("\n就是当你某个监听器监听了 MessageEvent，一旦触发 GroupMessageEvent 或 PrivateMessageEvent，MessageEvent 的监听器就会被调用。")]),t._v(" "),n("h3",{attrs:{id:"监听一个事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#监听一个事件"}},[t._v("#")]),t._v(" 监听一个事件")]),t._v(" "),n("p",[t._v("我们需要为事件监听器准备一个类。"),n("br"),t._v("\n只要你的类标上了 "),n("code",[t._v("@EventListener")]),t._v(" 注解，那么这个类就会作为事件监听器被载入。")]),t._v(" "),n("p",[t._v("有了事件监听器，我们就要准备监听方法了。"),n("br"),t._v("\n我们随便准备一个方法，然后标记上 "),n("code",[t._v("@Event")]),t._v(" 并且填写一个你需要监听的事件作为参数。"),n("br"),t._v("\n事件监听方法需要一个继承自 Event 类型的参数，并且没有返回值。"),n("br"),t._v("\n以下是一个最基本的例子。")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EventListener")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FriendListEvent")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Event")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFriendRequestEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NewFriendRequestEvent")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAccept")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCancel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("我们可以通过自定义 "),n("code",[t._v("Event")]),t._v(" 注解的 "),n("code",[t._v("weight")]),t._v(" 属性，来指定监听的优先级。"),n("br"),t._v(" "),n("code",[t._v("@Event(weight = Event.Weight.high)")]),n("br"),t._v("\n这样我们就可以得到一个高优先级的监听器。")]),t._v(" "),n("h4",{attrs:{id:"取消事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#取消事件"}},[t._v("#")]),t._v(" 取消事件")]),t._v(" "),n("p",[t._v("我们只需要将传递过来的 "),n("code",[t._v("event")]),t._v(" 参数的 "),n("code",[t._v("cancel")]),t._v(" 属性设置成 "),n("code",[t._v("true")]),t._v("，就可以取消这个事件。"),n("br"),t._v(" "),n("code",[t._v("event.setCancel(true);")]),n("br"),t._v("\n当然，前提是这个事件可以取消。")]),t._v(" "),n("h2",{attrs:{id:"自定义事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义事件"}},[t._v("#")]),t._v(" 自定义事件")]),t._v(" "),n("h3",{attrs:{id:"开始之前"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开始之前"}},[t._v("#")]),t._v(" 开始之前")]),t._v(" "),n("p",[t._v("内置事件虽然很多但是完全不满足个人的需要，这是显而易见的事情。"),n("br"),t._v("\n最为常规的移植其他机器人进入yuq的方式很明显是使用MessageEvent事件，或者分开使用GroupMessageEvent和PrivateMessageEvent."),n("br"),t._v("\n但是当我们使用yuq开发机器人的时候，还会遇到其他想要的情况，比如，有人@了你的机器人？"),n("br"),t._v("\n所以某些情况时，我们需要判断是否符合某种情况，但是又要优雅的写好代码，就需要自定义事件来帮忙完成。")]),t._v(" "),n("h3",{attrs:{id:"正式开始"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#正式开始"}},[t._v("#")]),t._v(" 正式开始")]),t._v(" "),n("p",[t._v("未完成。")]),t._v(" "),n("h4",{attrs:{id:"看看代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#看看代码"}},[t._v("#")]),t._v(" 看看代码")]),t._v(" "),n("p",[t._v("具体代码参考"),n("a",{attrs:{href:"https://github.com/YuQWorks/YuQ-Mirai-Demo",target:"_blank",rel:"noopener noreferrer"}},[t._v("YuQ-Mirai-Demo"),n("OutboundLink")],1),t._v(" 的 "),n("code",[t._v("wiki.IceCream.yuq.demo.event.myEvent")]),t._v("部分。这里不再放出。")]),t._v(" "),n("p",[t._v("]")])])}),[],!1,null,null,null);e.default=a.exports}}]);