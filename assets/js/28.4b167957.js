(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{401:function(e,s,a){"use strict";a.r(s);var v=a(45),r=Object(v.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"yuq的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yuq的配置文件"}},[e._v("#")]),e._v(" YuQ的配置文件")]),e._v(" "),a("p",[e._v("如果你流程足够顺利，到这一步时你并不会浪费太多的时间，所以你应该还清楚的记得我们首次登陆的时候，对YuQ的配置文件做了一点小小的改动，让他成功的登录了我们的机器人账号。在你编写机器人之前，我希望能给你讲讲配置文件有关的东西，有助于你的开发和开源。")]),e._v(" "),a("h2",{attrs:{id:"读取顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#读取顺序"}},[e._v("#")]),e._v(" 读取顺序")]),e._v(" "),a("p",[e._v("尽管目前只有一个conf文件夹，但是我还是要先说清楚，YuQ并不是必须在"),a("code",[e._v("resources")]),e._v("里面才能配置你的机器人账号密码。YuQ在打包完成后，优先读取的是运行目录下面的"),a("code",[e._v("conf")]),e._v("文件夹内的配置文件。所以想要更改账号吗是一个非常简单的事情。"),a("br"),e._v("\n具体的读取顺序是： "),a("code",[e._v("运行目录/conf")]),e._v(" > jar内的"),a("code",[e._v("conf/xxx")]),e._v("文件夹 > jar内的"),a("code",[e._v("conf")]),e._v("文件夹。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("请注意，这一读取顺序会影响所有配置文件内的参数。")])]),e._v(" "),a("h2",{attrs:{id:"运行模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行模式"}},[e._v("#")]),e._v(" 运行模式")]),e._v(" "),a("p",[e._v("这是Demo的配置文件中的第一个参数，但是其实已经不再适用。但是我将在这里详细讲解YuQ的配置文件与运行模式的情况。")]),e._v(" "),a("p",[e._v("这是目前的"),a("code",[e._v("resources")]),e._v("目录，其中存放着YuQ的配置文件，缓存控制文件，日志控制文件。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("resources\n├── conf\n│   └── YuQ.properties\n├── encache-YuQ-Mirai-Demo.xml\n└── logback.xml\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("接下来我们在"),a("code",[e._v("conf")]),e._v("下新建一个文件夹，并且取名为"),a("code",[e._v("dev")]),e._v("，在其中新建一个"),a("code",[e._v("YuQ.properties")]),e._v("，其目录结构如下。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("resources\n├── conf\n│   └──dev\n│      └──YuQ.properties\n│   └── YuQ.properties\n├── encache-YuQ-Mirai-Demo.xml\n└── logback.xml\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("当我们启动时，添加启动参数为"),a("code",[e._v("-runMode dev")]),e._v("，YuQ会按照"),a("code",[e._v("resources/conf/dev/YuQ.properties")]),e._v("作为最终配置文件加载。")]),e._v(" "),a("p",[e._v("为什么说是最终而不是直接按照该配置文件加载呢？YuQ实际顺序是首先依次加载配置文件，最后使用"),a("code",[e._v("conf/dev/YuQ.properties")]),e._v("内的参数来覆盖与之前"),a("code",[e._v("conf/YuQ.properties")]),e._v("不同的参数。")]),e._v(" "),a("p",[e._v("举例来说，在"),a("code",[e._v("conf/properties")]),e._v("内有参数"),a("code",[e._v("a = 111 , b = 222 , c = 333")]),e._v("，在"),a("code",[e._v("conf/dev/YuQ.properties")]),e._v("内仅有"),a("code",[e._v("b = 123")]),e._v("。那么最终加载结果会是"),a("code",[e._v("a = 111 , b = 123 , c = 333")]),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"扫包路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扫包路径"}},[e._v("#")]),e._v(" 扫包路径")]),e._v(" "),a("p",[e._v("这决定了YuQ扫描的包和其内容，主要有两种情况。")]),e._v(" "),a("ul",[a("li",[e._v("扫描两个或以上的包，使得你可以同时加载其他包到YuQ，特别是他们也是YuQ机器人的时候，你就会同时有两个机器人的全部功能，但是请注意他们之间的路由冲突，和事件处理冲突。")]),e._v(" "),a("li",[e._v("扫描一个包，但是还有其他包未被扫描。YuQ并不会管理你其他的包，所以你也不能借此进行依赖注入或者其他操作。还可能造成奇怪的Bug，我并不推荐。")])]),e._v(" "),a("h2",{attrs:{id:"机器人名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#机器人名"}},[e._v("#")]),e._v(" 机器人名")]),e._v(" "),a("p",[e._v("为机器人设定属于自己的昵称，当聊天内容出现昵称时，等同于对机器人使用了@。")]),e._v(" "),a("h2",{attrs:{id:"缓存文件名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存文件名"}},[e._v("#")]),e._v(" 缓存文件名")]),e._v(" "),a("p",[e._v("这里是设定YuQ读取的缓存文件名称，默认是"),a("code",[e._v("resources/encache-YuQ-Mirai-Demo.xml")]),e._v("，应该与该文件同名否则扫描失败。")]),e._v(" "),a("h2",{attrs:{id:"账号密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#账号密码"}},[e._v("#")]),e._v(" 账号密码")]),e._v(" "),a("p",[e._v("这里配置机器人的账号密码")]),e._v(" "),a("h2",{attrs:{id:"自定义设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义设置"}},[e._v("#")]),e._v(" 自定义设置")]),e._v(" "),a("p",[e._v("你可以在配置文件中设定任何参数，然后在实际的代码中使用"),a("code",[e._v('@Config("xxx")')]),e._v("来直接注入获取配置文件中的"),a("code",[e._v("xxx")]),e._v("。")])])}),[],!1,null,null,null);s.default=r.exports}}]);